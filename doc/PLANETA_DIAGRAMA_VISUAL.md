# ğŸ¨ Diagrama Visual Completo - Rota Planeta

## ğŸ›ï¸ Arquitetura em Camadas (Visual)

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                         CAMADA 1: ROTA                              â”ƒ
â”ƒ                   /app/planeta/page.tsx                             â”ƒ
â”ƒ                   /app/planeta/layout.tsx                           â”ƒ
â”ƒ                        â†“ acesso: /planeta                           â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ              CAMADA 2: CONTEXTO & PROVEDOR                          â”ƒ
â”ƒ                YearProvider                                         â”ƒ
â”ƒ    (Gerencia estado de ano lunar compartilhado)                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ              CAMADA 3: LAYOUT & BACKGROUND                          â”ƒ
â”ƒ                SpaceBackground                                      â”ƒ
â”ƒ    (AnimaÃ§Ã£o de fundo com field de estrelas + gradiente)           â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ           CAMADA 4: TELA PRINCIPAL (SCREEN)                         â”ƒ
â”ƒ              PlanetScreen (planet.tsx)                              â”ƒ
â”ƒ                                                                      â”ƒ
â”ƒ    Estado:                  FunÃ§Ãµes:                                â”ƒ
â”ƒ    â€¢ savedTodos            â€¢ handleTodoSubmit                       â”ƒ
â”ƒ    â€¢ filters               â€¢ assignTodoToPhase                      â”ƒ
â”ƒ    â€¢ activeDrop            â€¢ assignTodoToIsland                     â”ƒ
â”ƒ    â€¢ isDraggingTodo        â€¢ handleDragStart/End                    â”ƒ
â”ƒ    â€¢ showDeleteConfirm     â€¢ handleDrop handlers                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
      â†™               â†“                  â†“                   â†˜
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ PLANETA  â”‚ â”‚  LUAS   â”‚ â”‚ CARD + TAREFASâ”‚ â”‚   ILHAS     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚            â”‚            â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ         CAMADA 5: COMPONENTES (COMPONENT LAYER)                     â”ƒ
â”œâ”€ CelestialObject            (Planeta, Luas, Sol)                    â”ƒ
â”œâ”€ Card                       (Container com estilo)                  â”ƒ
â”œâ”€ TodoInput                  (Input para nova tarefa)                â”ƒ
â”œâ”€ SavedTodosPanel            (Painel de tarefas salvas)              â”ƒ
â”œâ”€ IslandsList                (Lista de ilhas interativas)            â”ƒ
â”œâ”€ FiltersPanel               (Painel de filtros expansÃ­vel)          â”ƒ
â”œâ”€ MoonCluster                (Cluster de luas)                       â”ƒ
â”œâ”€ AccessibleTabs             (Abas acessÃ­veis)                       â”ƒ
â”œâ”€ EmptyState                 (Estado vazio)                          â”ƒ
â”œâ”€ InputWindow                (Janela de input)                       â”ƒ
â”œâ”€ CosmosChatModal            (Modal de chat)                         â”ƒ
â”œâ”€ MoonPhase, MoonPhaseDisplay, PhaseTag  (Componentes de fase)       â”ƒ
â””â”€ Outros componentes menores...                                      â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ         CAMADA 6: HOOKS CUSTOMIZADOS (HOOK LAYER)                   â”ƒ
â”œâ”€ usePhaseInputs(phase)      â†’ saveInput(...) âœ“                      â”ƒ
â”œâ”€ useFilteredTodos(todos, filters) â†’ filtered[] âœ“                    â”ƒ
â”œâ”€ useIslandNames()           â†’ {islandNames, renameIsland} âœ“         â”ƒ
â””â”€ useYear()                  â†’ aÃ±o lunar (via context) âœ“             â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ            CAMADA 7: TIPOS TYPESCRIPT (TYPE LAYER)                  â”ƒ
â”œâ”€ ScreenProps               â†’ {navigateWithFocus}                    â”ƒ
â”œâ”€ MoonPhase                 â†’ 'luaNova' | 'luaCrescente' | ...       â”ƒ
â”œâ”€ SavedTodo                 â†’ {id, text, phase, islandId, ...}       â”ƒ
â”œâ”€ FilterState               â†’ {view, inputType, phase, ...}          â”ƒ
â”œâ”€ IslandId                  â†’ ID da ilha                             â”ƒ
â”œâ”€ CelestialType             â†’ 'planeta' | 'lua*' | 'sol'            â”ƒ
â””â”€ IslandNames               â†’ Record<IslandId, string>               â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                              â†“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ         CAMADA 8: UTILITÃRIOS & DADOS (UTILITY LAYER)               â”ƒ
â”œâ”€ todoStorage.ts            (loadSavedTodos, saveSavedTodos)         â”ƒ
â”œâ”€ phaseVibes.ts             (PHASE_VIBES: {label, emoji, color})     â”ƒ
â”œâ”€ islandNames.ts            (getIslandLabel, IslandNames type)       â”ƒ
â”œâ”€ moonPhases.ts             (Dados de fases lunares)                 â”ƒ
â””â”€ insightChatPresets.ts     (Presets para chat)                      â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## ğŸ”„ Fluxo de Dados Simplificado

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         USER INTERACTION (Navegador)                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         â†“
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   PlanetScreen (Camada 4)                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘   â”‚ Estado Local (React.useState)                   â”‚  â•‘
â•‘   â”‚ â€¢ savedTodos                                    â”‚  â•‘
â•‘   â”‚ â€¢ filters (view, inputType, phase, island)     â”‚  â•‘
â•‘   â”‚ â€¢ activeDrop, isDraggingTodo                   â”‚  â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â†™              â†“              â†“              â†˜
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ usePhase   â”‚ â”‚ useFilterâ”‚ â”‚ useIslandâ”‚ â”‚ useYear  â”‚
    â”‚ Inputs     â”‚ â”‚ edTodos  â”‚ â”‚ Names    â”‚ â”‚ (Context)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚              â”‚              â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Componentes Filhos (Camada 5)                    â”‚
    â”‚ â”œâ”€ MoonCluster                                  â”‚
    â”‚ â”œâ”€ IslandsList                                  â”‚
    â”‚ â”œâ”€ SavedTodosPanel                              â”‚
    â”‚ â”œâ”€ TodoInput                                    â”‚
    â”‚ â””â”€ FiltersPanel                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RenderizaÃ§Ã£o & SincronizaÃ§Ã£o (localStorage)      â”‚
    â”‚ â””â”€ saveSavedTodos() / loadSavedTodos()           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Fluxo de Drag & Drop

```
USER INICIATES DRAG
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleDragStart(todoId)          â”‚
â”‚ âœ“ Armazena todoId em dataTransferâ”‚
â”‚ âœ“ setIsDraggingTodo(true)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleDragOverPhase/Island       â”‚
â”‚ âœ“ Mostra feedback visual         â”‚
â”‚ âœ“ setActiveDrop(phase/island)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER SOLTA (DROP)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    SUCESSO?
    â†™          â†˜
SIM            NÃƒO
 â†“              â†“
handleDrop  handleDragEnd
 â†“              â†“
assign      showDelete
ToDo        Confirm
 â†“              â†“
saveTodos   Wait for
 â†“          confirmation
Success

```

---

## ğŸ“Š Estado Gerenciado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PlanetScreen State Management                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ DADOS PRINCIPAIS:                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ const [savedTodos, setSavedTodos]       â”‚    â”‚
â”‚ â”‚   = useState<SavedTodo[]>([])           â”‚    â”‚
â”‚ â”‚ const [hasLoadedTodos, setHasLoaded]    â”‚    â”‚
â”‚ â”‚   = useState(false)                     â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                 â”‚
â”‚ FILTROS:                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ const [filters, setFilters] =           â”‚    â”‚
â”‚ â”‚   useState<FilterState>({                â”‚    â”‚
â”‚ â”‚     view: 'inbox' | 'lua-atual',        â”‚    â”‚
â”‚ â”‚     inputType: 'all'|'text'|'checkbox', â”‚    â”‚
â”‚ â”‚     todoStatus: 'all'|'completed',      â”‚    â”‚
â”‚ â”‚     phase: MoonPhase | null,            â”‚    â”‚
â”‚ â”‚     island: IslandId | null             â”‚    â”‚
â”‚ â”‚   })                                     â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                 â”‚
â”‚ INTERAÃ‡ÃƒO UI:                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ const [isFiltersPanelOpen, ...]         â”‚    â”‚
â”‚ â”‚ const [activeDrop, setActiveDrop]       â”‚    â”‚
â”‚ â”‚ const [activeIslandDrop, ...]           â”‚    â”‚
â”‚ â”‚ const [isDraggingTodo, setIsDragging]   â”‚    â”‚
â”‚ â”‚ const [draggingTodoId, setDraggingId]   â”‚    â”‚
â”‚ â”‚ const [showDeleteConfirm, ...]          â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                 â”‚
â”‚ HOOKS & CONTEXTO:                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ const { saveInput } = usePhaseInputs()  â”‚    â”‚
â”‚ â”‚ const { islandNames, renameIsland }     â”‚    â”‚
â”‚ â”‚   = useIslandNames()                    â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ–¼ï¸ Layout Visual da PÃ¡gina

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        /PLANETA                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKGROUND: SpaceBackground (Fundo animado)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   COLUNA 1   â”‚  â”‚        COLUNA CENTRAL            â”‚  â”‚COLUNA 3 â”‚
â”‚  (lg:max-    â”‚  â”‚      (Card Principal)            â”‚  â”‚ (lg:    â”‚
â”‚   w-xs)      â”‚  â”‚       (lg:flex-1)                â”‚  â”‚ max-    â”‚
â”‚              â”‚  â”‚                                  â”‚  â”‚ w-xs)   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚         â”‚
â”‚ â”‚ Planeta  â”‚ â”‚  â”‚ â”‚ "Painel Lunar Lateral"    â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚(CelestO) â”‚ â”‚  â”‚ â”‚                            â”‚  â”‚  â”‚ â”‚Luas â”‚ â”‚
â”‚ â”‚ (lg)     â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚ â”‚Moon â”‚ â”‚
â”‚ â”‚          â”‚ â”‚  â”‚ â”‚ [Mostrar Painel] Button    â”‚  â”‚  â”‚ â”‚     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚ â”‚Cluster
â”‚ â”‚ â”‚Ilhas â”‚ â”‚  â”‚ â”‚ FiltersPanel (expansÃ­vel)  â”‚  â”‚  â”‚ â”‚(sm)  â”‚
â”‚ â”‚ â”‚List  â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚ â”‚      â”‚ â”‚
â”‚ â”‚ â”‚      â”‚ â”‚  â”‚ â”‚ SavedTodosPanel            â”‚  â”‚  â”‚ â”‚      â”‚ â”‚
â”‚ â”‚ â”‚      â”‚ â”‚  â”‚ â”‚ â”œâ”€ Tabs (Inbox/Current)    â”‚  â”‚  â”‚ â”‚      â”‚ â”‚
â”‚ â”‚ â”‚      â”‚ â”‚  â”‚ â”‚ â”œâ”€ Todo List (Draggable)   â”‚  â”‚  â”‚ â”‚ â”Œâ”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚      â”‚ â”‚  â”‚ â”‚ â””â”€ Filtros (Tipo, Status)  â”‚  â”‚  â”‚ â”‚ â”‚Solâ”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚ â”‚ â”‚(md)
â”‚ â”‚          â”‚  â”‚ â”‚ TodoInput                  â”‚  â”‚  â”‚ â”‚ â””â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚          â”‚  â”‚ â”‚ (Nova tarefa)              â”‚  â”‚  â”‚ â”‚      â”‚ â”‚
â”‚ â”‚          â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                                â”‚  â”‚         â”‚
â”‚              â”‚  â”‚                                â”‚  â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  (Mobile: 1 coluna)     (Tablet: 2 colunas)    (Desktop: 3 colunas)
```

---

## ğŸ”€ Responsividade

```
MOBILE (<640px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Planeta    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Card+      â”‚
â”‚  Tarefas     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Ilhas      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Luas+Sol   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLET (640px-1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Planeta +  â”‚  Card com    â”‚
â”‚  Ilhas      â”‚  Tarefas     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Luas       â”‚  Sol         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DESKTOP (>1024px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Planeta â”‚ Card com     â”‚ Luas + â”‚
â”‚+ Ilhas â”‚ Tarefas      â”‚ Sol    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Fluxo de InicializaÃ§Ã£o

```
1. User acessa: http://localhost:3000/planeta
   â†“
2. Next.js carrega: /app/planeta/layout.tsx
   â”œâ”€ Define metadata
   â””â”€ Define base styles
   â†“
3. Next.js carrega: /app/planeta/page.tsx
   â””â”€ Renderiza <PlanetaPage>
   â†“
4. <PlanetaPage> renderiza:
   â”œâ”€ <YearProvider>
   â”‚  â”œâ”€ <SpaceBackground />
   â”‚  â””â”€ <PlanetScreen navigateWithFocus={...} />
   â†“
5. <PlanetScreen> executa useEffect:
   â”œâ”€ setSavedTodos(loadSavedTodos())  â† localStorage
   â””â”€ setHasLoadedTodos(true)
   â†“
6. PÃ¡gina renderizada com dados carregados
   â”œâ”€ MoonCluster (Luas interativas)
   â”œâ”€ IslandsList (Ilhas selecionÃ¡veis)
   â”œâ”€ SavedTodosPanel (Tarefas arrastÃ¡veis)
   â””â”€ TodoInput (Input para nova tarefa)
   â†“
7. User interage (click, drag, input, etc)
   â†“
8. Estado atualiza â†’ Componentes re-renderizam
   â†“
9. saveSavedTodos() persiste em localStorage
   â†“
10. PÃ¡gina permanece sincronizada
```

---

## âœ¨ Funcionalidades por Camada

```
CAMADA 1: ROTA
â””â”€ Acesso em /planeta
â””â”€ Metadata da pÃ¡gina
â””â”€ Base de layout

CAMADA 2: CONTEXTO
â””â”€ Estado de ano lunar compartilhado

CAMADA 3: BACKGROUND
â””â”€ AnimaÃ§Ã£o de fundo

CAMADA 4: TELA
â”œâ”€ Gerenciamento de estado
â”œâ”€ Drag & drop de tarefas
â”œâ”€ Filtros avanÃ§ados
â”œâ”€ ValidaÃ§Ã£o de dados
â””â”€ PersistÃªncia em localStorage

CAMADA 5: COMPONENTES
â”œâ”€ UI renderizaÃ§Ã£o
â”œâ”€ Interatividade visual
â”œâ”€ Feedback ao usuÃ¡rio
â””â”€ Acessibilidade

CAMADA 6: HOOKS
â”œâ”€ LÃ³gica de negÃ³cio
â”œâ”€ SincronizaÃ§Ã£o com backend
â”œâ”€ CÃ¡lculos derivados
â””â”€ Gerenciamento de contexto

CAMADA 7: TIPOS
â””â”€ Type safety

CAMADA 8: UTILITÃRIOS
â”œâ”€ PersistÃªncia de dados
â”œâ”€ ConfiguraÃ§Ãµes
â””â”€ Dados estÃ¡ticos
```

---

**Diagrama criado em:** 24 de dezembro de 2025
**VersÃ£o:** 1.0 âœ¨
